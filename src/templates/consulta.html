{% extends "base.html" %}

{% block estilos %}
    <link rel="stylesheet" href="./static/css/consulta.css">
    <link rel="stylesheet" href="./static/css/carousel.css">
{% endblock %}

{% block scripts %}
    <script src="./static/js/Consulta.js"></script>
    <script src="./static/js/Carousel.js"></script>
{% endblock %}

{% block conteudo %}
    <div class="row">
        <div class="col-1"></div>
        <form class="col-10" id="filtro">
            <div class="dropdown">
                <label for="periodo">Periodo</label>
                <button type="button" onclick="ShowSelect('periodo', this)">Mostrar</button>
                <select name="periodo" id="periodo" multiple="multiple">
                {% for periodo in periodos %}
                    <option value="{{ periodo.name }}">{{ periodo.name }}</option>
                {% endfor %}
                </select>
            </div>
            <div class="dropdown">
                <label for="cidade">Cidade</label>
                <button type="button" onclick="ShowSelect('cidade', this)">Mostrar</button>
                <select name="cidade" id="cidade"  multiple="multiple">
                {% for cidade in cidades %}
                    <option value="{{ cidade.name }}">{{ cidade.value }}</option>
                {% endfor %}
                </select>
                    
            </div>
            <div class="dropdown">
                <label for="tipoValor">Tipo do valor</label>
                <select name="tipoValor" id="tipoValor">
                {% for tipoValor in tipoValor %}
                    <option value="{{ tipoValor.name }}">{{ tipoValor.value }}</option>
                {% endfor %}
                </select>
            </div>
            <div class="dropdown">
                <label for="tipo">Tipo</label>
                <select name="tipo" id="tipo" onchange="document.getElementById('subTipo').selectedIndex = -1; UpdatesubTipos(this)">
                {% for tipo in tipos %}
                    <option value="{{ tipo.name }}">{{ tipo.value }}</option>
                {% endfor %}
                </select>
            </div>
            <div class="dropdown">
                <label for="subTipo">Subtipo</label>
                <button type="button" onclick="ShowSelect('subTipo', this)">Mostrar</button>
                <select name="subTipo" id="subTipo"  multiple="multiple">
                {% for subTipo in subTipos %}
                    {% for sub in subTipo %}
                        <option value="{{ sub.name }}">{{ sub.value }}</option>
                    {% endfor %}
                {% endfor %}
                </select>
            </div>
            <div class="dropdown">
                <label for="porcentagem">Porcentagem</label>
                <input name="porcentagem" id="porcentagem" type="checkbox">
            </div>
            <div class="dropdown">
                <label for="buscar">Buscar</label>
                <button name="buscar" id="filtro-btn" type="button" onclick="Search()"><img src="./static/img/magnifying glass.png"></button>
            </div>
            <div class="dropdown">
                <label for="reset">Resetar</label>
                <button name="reset" id="filtro-btn" type="button" onclick="window.location.href = 'consulta';"><img src="./static/img/rewind.png"></button>
            </div>
        </form>
        <div class="col-1"></div>
    </div>
    {% for cidade in graficos %}
    <div class="row">
        <div class="col-1"></div>
        <div id="{{ cidade.name }}" class="col-10 carousel">
            {% if cidade.paths| length > 1 %}
            <button onclick="RollCarousel(document.getElementById('{{ cidade.name }}'), -1)"><1/4</button>
            {% endif %}
            {% for path in cidade.paths %}
            <img class="grafico" src="{{ path }}">
            {% endfor %}
            {% if cidade.paths| length > 1 %}
            <button onclick="RollCarousel(document.getElementById('{{ cidade.name }}'), 1)">1/4></button>
            {% endif %}
        </div>
        <div class="col-1"></div>
    </div>
    {% endfor %}
{% endblock %}